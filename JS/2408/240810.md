# Javascript

### 🔹 this 키워드

- 메소드에서 this 사용

  메소드는 객체 안에 위치한 함수를 말한다.<br>
  메소드에서 `this` 키워드를 사용하면 해당 객체를 가리킨다.

  ```js
  // method -> object
  const audio = {
    title: "a",
    play() {
      console.log("play this", this);
    },
  };

  audio.play();

  audio.stop = () => {
    console.log("stop this", this);
  };
  ```

- 함수에서의 this 사용

  함수 내에서 `this`를 사용하면 윈도우 객체를 호출한다.

  ```js
  // function -> window object
  function playAudio() {
    console.log(this);
  }

  playAudio(); // 함수를 호출하면 함수 내에서 this는 윈도우 객체를 호출
  ```

- constructor 함수

  ```js
  function Audio(title) {
    this.title = title; // 객체 title 생성
    console.log(this);
  }

  const audio = new Audio("a"); // 생성자 호출
  ```

각 블록마다 `this` 키워드가 적용되는 범위가 다르다.

```js
const audio = {
  title: "audio",
  categories: ["rock", "pop", "hiphop", "jazz"],
  displayCategories() {
    this.categories.forEach(
      function (category) {
        console.log(`title: ${this.title}, category: ${category}`); // 이렇게만 작성하면 this.title은 객체의 title을 참조하지 않고 window 객체를 참조함
      },
      { title: "audio" } // 따라서 함수 내에서 객체 title을 명시해줘서 콜백함수에서 this로 참조할 수 있게 함, 또는 이 부분에서 this로 작성하면 객체를 참조하기 때문에 동일한 결과가 나옴
    );
  },
};
```

- 화살표함수 this 키워드

  화살표 함수에서 사용된 `this` 키워드는 항상 상위스코프 this를 가리키게 된다.

  ```js
  const audio = {
    title: "audio",
    categories: ["rock", "pop", "hiphop", "jazz"],
    displayCategories() {
      this.categories.forEach((category) => {
        console.log(this); // 객체 title을 가리킴
      });
    },
  };
  ```

---

함수에서 `this` 키워드를 사용했을 때 윈도우 객체가 참조되는 것을 방지하기 위해서 `call()` 메소드, `bind()` 메소드, `apply()` 메소드를 사용할 수 있다.

- call() 메소드

  `call` 메소드는 함수를 호출하는 함수이다. 첫번째 매개변수로 값을 전달하면 호출되는 함수의 this 안에 전달받은 것을 받게 된다.

  ```js
  const fullName = function (city, country) {
    console.log(this.firstName + " " + this.lastName, city, country);
  };

  const person1 = {
    firstName: "john",
    lastName: "smith",
  };

  fullName.call(person1, "oslo", "norway");
  ```

- apply() 메소드

  `apply` 메소드는 call 메소드와 유사하지만 프로퍼티를 입력할 때 배열로 넣는다.

  ```js
  const fullName = function (city, country) {
    console.log(this.firstName + " " + this.lastName, city, country);
  };

  const person1 = {
    firstName: "john",
    lastName: "smith",
  };

  fullName.apply(person1, ["oslo", "norway"]);
  ```

- bind() 메소드

  객체를 바인딩만 해주고 함수 호출은 안되기 때문에 위 두개의 메소드와 달리 함수 호출을 별도로 해줘야 한다.

  ```js
  function func(language) {
    if (language == "kor") {
      console.log(`language: ${this.korGreeting}`);
    } else {
      console.log(`language: ${this.engGreeting}`);
    }
  }

  const greeting = {
    korGreeting: "안녕 ",
    engGreeting: "hello ",
  };

  // const boundFunc = func.bind(greeting);
  // boundFunc("kor");

  const boundFunc = func.bind(greeting)("kor"); // 이렇게 바로 호출도 가능
  ```

---
